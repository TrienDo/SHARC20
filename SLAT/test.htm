
<!DOCTYPE html> 
<html> 
<head> 
<link rel="stylesheet" type="text/css" href="css/lomak.css"/>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=drawing"></script>
<script src ="lib/jqueryUI.1.10.4/js/jquery-1.10.2.js"></script> 
<script>
     var count = 5; 
    
    
     
    $(function()
    { 
            //Add, Save, Edit and Delete functions code
           
            addList(count);        
                        
            
             $(".reorder-up").click(function(){
              var $current = $(this).closest('li')
              var $previous = $current.prev('li');
              var selectedID = $current.index();
              if($previous.length !== 0){
                //Set all button available
                $($current.find("button")[0]).prop('disabled', false);                
                $($current.find("button")[1]).prop('disabled', false);
                $($previous.find("button")[0]).prop('disabled', false);
                $($previous.find("button")[1]).prop('disabled', false);
                if(selectedID == 1)//second --> become first -> Disable up
                {
                    $($current.find("button")[0]).prop('disabled', true);                    
                }    
                if(selectedID == count - 1)//last --> previous will be last -> disable down
                {
                    $($previous.find("button")[1]).prop('disabled', true);                    
                }
                
                $current.insertBefore($previous);
                scrollUp($previous.outerHeight());
              }
              return false;
            });
        
            $(".reorder-down").click(function(){
              var $current = $(this).closest('li')
              var $next = $current.next('li');
              var selectedID = $current.index();
              if($next.length !== 0){
               
                //Set all button available
                $($current.find("button")[0]).prop('disabled', false);                
                $($current.find("button")[1]).prop('disabled', false);
                $($next.find("button")[0]).prop('disabled', false);
                $($next.find("button")[1]).prop('disabled', false);
                if(selectedID == 0)//first --> next become first -> Disable up of next
                {
                    $($next.find("button")[0]).prop('disabled', true);                    
                }    
                if(selectedID == count - 2)//before last --> become last -> disable down
                {
                    $($current.find("button")[1]).prop('disabled', true);                    
                }
                
                $current.insertAfter($next);                
                scrollDown($next.outerHeight());
              }
              return false;
            });
            
            $(".reorder-delete").click(function(){
                var $current = $(this).closest('li')
                var selectedID = $current.index();
                if(selectedID == 0)
                {
                    var $next = $current.next('li');   
                    if($next.length !== 0)                    
                        $($next.find("button")[0]).prop('disabled', true);//Disable up of next                    
                }
                if(selectedID == count - 1)
                {
                    var $previous = $current.prev('li');
                    if($previous.length !== 0)               
                       $($previous.find("button")[1]).prop('disabled', true);//disable down of previous              
                }
                
                count--;
                $current.remove();                
                return false;
            });
            
            $(".reorder-edit").click(function(){
                var $current = $(this).closest('li')
                alert($current.attr("id") + "   vs.   " + $current.index());                
                return false;
            });
            
    });
    
    function scrollUp(step)
    {
        var cur = $('#mediaList').scrollTop();        
        cur = parseInt(cur)- step;
        if(cur<0)
            cur = 0;         
        $('#mediaList').stop().animate({
            scrollTop:cur
        },500);    
    }
    
    function scrollDown(step)
    {    
        var cur = $('#mediaList').scrollTop();
        cur = parseInt(cur)+ step;
        $('#mediaList').stop().animate({
            scrollTop:cur
        },500);
        
    }
    
    function addList(count)
    {
        var content = '<ul id="uList" style="list-style:none; padding-left:0;display:table; margin:0 auto;">';        
        for(var i=0; i < count; i++)
        {
            content += "<li>This is line " + i + "<img src='images/nexus7.png' height='" + (i*10 + 50) + "' /><br/>";
            content += '<div style="text-align:center"><button class="reorder-up googleLookAndFeel"><img class="actionImage" src="images/media_up.png"/>Up</button><button class="reorder-down googleLookAndFeel"><img class="actionImage" src="images/media_down.png"/>Down</button><button class="reorder-edit googleLookAndFeel"><img class="actionImage" src="images/edit.png"/>Edit</button><button class="reorder-delete googleLookAndFeel"><img class="actionImage" src="images/delete.png" title="Delete this media item up"/>Delete</button></div><hr/>';
        }
        content + '</ul>';   
        $("#mediaList").html(content);
        var buttonList = $("#uList").find("button"); 
        $(buttonList[0]).prop('disabled', true);
        $(buttonList[buttonList.length - 3]).prop('disabled', true);
    }
    
   
</script> 
</head> 
<body style="background-color:#FFF;"> 
     
     <div id="mediaList" style='overflow:auto; width:400px;height:200px;'></div>
        
    </body> 
</html>
